import React,{useEffect,useState} from 'react'; import TopNav from '../../components/TopNav'; import PrivateRoute from '../../components/PrivateRoute'; import api from '../api'; import { Container, Card, Table, Form, Button } from 'react-bootstrap';
export default function CertificationsPage(){ const [certs,setCerts]=useState([]); const [vendorId,setVendorId]=useState(''); const [name,setName]=useState(''); const [expiry,setExpiry]=useState(''); const load=async()=>{ try{ const {data}=await api.get('/compliance'); setCerts(data);}catch{} }; useEffect(()=>{load();},[]); const add=async(e)=>{ e.preventDefault(); await api.post('/compliance',{vendor_id:vendorId,name,expiry_date:expiry}); setVendorId(''); setName(''); setExpiry(''); await load(); };
  return (<PrivateRoute allow={['admin','procurement']}><TopNav/><Container><Card className="p-3 mb-3"><h5>Add Certification</h5><Form onSubmit={add}><div className="d-flex gap-2"><Form.Control placeholder="Vendor ID" value={vendorId} onChange={e=>setVendorId(e.target.value)} required /><Form.Control placeholder="Name" value={name} onChange={e=>setName(e.target.value)} required /><Form.Control type="date" value={expiry} onChange={e=>setExpiry(e.target.value)} required /><Button type="submit">Add</Button></div></Form></Card><Card className="p-3"><h5>Certifications</h5><Table striped bordered hover size="sm"><thead><tr><th>ID</th><th>Vendor</th><th>Name</th><th>Expiry</th></tr></thead><tbody>{certs.map(c=>(<tr key={c.id}><td>{c.id}</td><td>{c.vendor_id}</td><td>{c.name}</td><td>{c.expiry_date}</td></tr>))}</tbody></Table></Card></Container></PrivateRoute>); }
