import React, {useEffect,useState} from 'react'; import TopNav from '../../components/TopNav'; import PrivateRoute from '../../components/PrivateRoute'; import api from '../api'; import { Container, Card, Table } from 'react-bootstrap';
export default function VendorDashboard(){ const [contracts,setContracts]=useState([]); const [certs,setCerts]=useState([]); const [ratings,setRatings]=useState([]); useEffect(()=>{ (async ()=>{ try{ const c=await api.get('/vendor/me/contracts'); setContracts(c.data);}catch{} try{ const s=await api.get('/vendor/me/certs'); setCerts(s.data);}catch{} try{ const r=await api.get('/vendor/me/ratings'); setRatings(r.data);}catch{} })(); },[]);
  return (<PrivateRoute allow={['vendor']}><TopNav/><Container><h2 className="mb-3">Vendor Dashboard</h2><Card className="p-3 mb-3"><h5>My Contracts</h5><Table size="sm"><thead><tr><th>ID</th><th>Title</th><th>Status</th><th>Expiry</th></tr></thead><tbody>{contracts.map(c=>(<tr key={c.id}><td>{c.id}</td><td>{c.title}</td><td>{c.status}</td><td>{c.expiry_date}</td></tr>))}</tbody></Table></Card><Card className="p-3 mb-3"><h5>My Certifications</h5><Table size="sm"><thead><tr><th>ID</th><th>Name</th><th>Expiry</th></tr></thead><tbody>{certs.map(s=>(<tr key={s.id}><td>{s.id}</td><td>{s.name}</td><td>{s.expires_on || s.expiry_date}</td></tr>))}</tbody></Table></Card><Card className="p-3"><h5>My Ratings</h5><Table size="sm"><thead><tr><th>ID</th><th>Metric</th><th>Score</th><th>By</th></tr></thead><tbody>{ratings.map(r=>(<tr key={r.id}><td>{r.id}</td><td>{r.metric || 'N/A'}</td><td>{r.score || r.delivery_time}</td><td>{r.rated_by}</td></tr>))}</tbody></Table></Card></Container></PrivateRoute>); }
