import React, {useEffect,useState} from 'react'; import TopNav from '../../components/TopNav'; import PrivateRoute from '../../components/PrivateRoute'; import api from '../api'; import { Container, Card } from 'react-bootstrap'; import { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer } from 'recharts';
export default function FinanceDashboard(){ const [metrics,setMetrics]=useState(null); useEffect(()=>{ (async ()=>{ try{ const m=await api.get('/finance/metrics'); setMetrics(m.data);}catch{} })(); },[]); const sample=[{category:'IT',spend:120000},{category:'Hardware',spend:78000},{category:'SaaS',spend:56000}];
  return (<PrivateRoute allow={['finance']}><TopNav/><Container><h2 className="mb-3">Finance Dashboard</h2><Card className="p-3 mb-3">Renewals in 30 days: <strong>{metrics?.renewals30 ?? '-'}</strong><br/>Total Contract Value: <strong>${metrics?.tcv ?? 0}</strong></Card><Card className="p-3"><h5>Spend</h5><div style={{width:'100%',height:300}}><ResponsiveContainer><BarChart data={sample}><XAxis dataKey="category"/><YAxis/><Tooltip/><Bar dataKey="spend"/></BarChart></ResponsiveContainer></div></Card></Container></PrivateRoute>); }
