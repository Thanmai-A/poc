import React,{useEffect,useState} from 'react'; import TopNav from '../../components/TopNav'; import PrivateRoute from '../../components/PrivateRoute'; import api from '../api'; import { Container, Card, Table, Button } from 'react-bootstrap';
export default function ProcurementDashboard(){ const [pending,setPending]=useState([]); const load=async()=>{ try{ const {data}=await api.get('/procurement/pending-vendors'); setPending(data);}catch{} }; useEffect(()=>{load();},[]); const decide=async(id,action)=>{ await api.post(`/procurement/vendors/${id}/${action}`); await load(); };
  return (<PrivateRoute allow={['procurement']}><TopNav/><Container><h2 className="mb-3">Procurement Dashboard</h2><Card className="p-3"><h5>Pending Vendors</h5><Table striped bordered hover><thead><tr><th>ID</th><th>Company</th><th>Email</th><th>Actions</th></tr></thead><tbody>{pending.map(v=>(<tr key={v.id}><td>{v.id}</td><td>{v.company_name}</td><td>{v.email}</td><td><Button size="sm" className="me-2" onClick={()=>decide(v.id,'approve')}>Approve</Button><Button size="sm" variant="outline-danger" onClick={()=>decide(v.id,'reject')}>Reject</Button></td></tr>))}</tbody></Table></Card></Container></PrivateRoute>); }
