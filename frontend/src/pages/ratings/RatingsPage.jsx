import React,{useEffect,useState} from 'react'; import TopNav from '../../components/TopNav'; import PrivateRoute from '../../components/PrivateRoute'; import api from '../api'; import { Container, Card, Table, Form, Button } from 'react-bootstrap';
export default function RatingsPage(){ const [ratings,setRatings]=useState([]); const [vendorId,setVendorId]=useState(''); const [metric,setMetric]=useState('Delivery'); const [score,setScore]=useState(80); const load=async()=>{ try{ const {data}=await api.get('/performance'); setRatings(data);}catch{} }; useEffect(()=>{load();},[]); const add=async(e)=>{ e.preventDefault(); await api.post('/performance',{vendor_id:vendorId,metric,score}); setVendorId(''); setMetric('Delivery'); setScore(80); await load(); };
  return (<PrivateRoute allow={['admin','procurement','finance']}><TopNav/><Container><Card className="p-3 mb-3"><h5>Add Rating</h5><Form onSubmit={add}><div className="d-flex gap-2"><Form.Control placeholder="Vendor ID" value={vendorId} onChange={e=>setVendorId(e.target.value)} required /><Form.Control placeholder="Metric" value={metric} onChange={e=>setMetric(e.target.value)} required /><Form.Control type="number" min="0" max="100" value={score} onChange={e=>setScore(Number(e.target.value))} required /><Button type="submit">Add</Button></div></Form></Card><Card className="p-3"><h5>Ratings</h5><Table striped bordered hover size="sm"><thead><tr><th>ID</th><th>Vendor</th><th>Metric</th><th>Score</th></tr></thead><tbody>{ratings.map(r=>(<tr key={r.id}><td>{r.id}</td><td>{r.vendor_id}</td><td>{r.metric}</td><td>{r.score}</td></tr>))}</tbody></Table></Card></Container></PrivateRoute>); }
